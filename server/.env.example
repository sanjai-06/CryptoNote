# CryptoNote Enterprise Password Manager - Environment Configuration
# Copy this file to .env and configure with your actual values
# NEVER commit .env files to version control

# ================================
# CORE APPLICATION SETTINGS
# ================================
NODE_ENV=development
PORT=5000

# ================================
# DATABASE CONFIGURATION
# ================================
# MongoDB connection string
MONGO_URI=mongodb://localhost:27017/cryptonote
# Alternative: MongoDB Atlas
# MONGO_URI=mongodb+srv://username:password@cluster.mongodb.net/cryptonote?retryWrites=true&w=majority

# Redis connection string for sessions and caching
REDIS_URL=redis://localhost:6379
# Alternative: Redis Cloud
# REDIS_URL=redis://username:password@host:port

# ================================
# SECURITY & ENCRYPTION
# ================================
# JWT secret for access tokens (minimum 32 characters)
JWT_SECRET=your-super-secure-jwt-secret-key-here-minimum-32-chars

# JWT refresh token secret (different from access token secret)
JWT_REFRESH_SECRET=your-super-secure-refresh-secret-key-here-minimum-32-chars

# Session secret for Express sessions (minimum 32 characters)
SESSION_SECRET=your-super-secure-session-secret-key-here-minimum-32-chars

# Master encryption key for password encryption (EXACTLY 32 bytes = 64 hex characters)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
MASTER_ENCRYPTION_KEY=0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef

# Audit log signing key for tamper detection
AUDIT_SIGNING_KEY=your-audit-log-signing-key-for-integrity-verification

# ================================
# CORS & SECURITY HEADERS
# ================================
# Allowed origins for CORS (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:5173,http://localhost:5174

# Enable credentials in CORS (true/false)
CORS_CREDENTIALS=true

# ================================
# EMAIL CONFIGURATION
# ================================
# SMTP settings for email notifications
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USER=your-email@gmail.com
EMAIL_PASS=your-app-password

# Email sender information
EMAIL_FROM="CryptoNote Security" <security@cryptonote.com>

# Frontend URL for email links
FRONTEND_URL=http://localhost:5173

# ================================
# SMS/MFA CONFIGURATION
# ================================
# Twilio credentials for SMS MFA
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=+1234567890

# ================================
# RATE LIMITING & SECURITY
# ================================
# Rate limiting configuration
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Brute force protection
BRUTE_FORCE_FREE_RETRIES=3
BRUTE_FORCE_MIN_WAIT=300000
BRUTE_FORCE_MAX_WAIT=3600000

# ================================
# LOGGING & MONITORING
# ================================
# Log level (error, warn, info, debug)
LOG_LEVEL=info

# Log file paths
LOG_FILE_PATH=logs/app.log
AUDIT_LOG_PATH=logs/audit.log
SECURITY_LOG_PATH=logs/security.log

# ================================
# ML/AI CONFIGURATION
# ================================
# Anomaly detection thresholds
ANOMALY_THRESHOLD_LOGIN=0.7
ANOMALY_THRESHOLD_SESSION=0.6
ANOMALY_THRESHOLD_VELOCITY=0.8

# ML model paths (if using pre-trained models)
ML_MODEL_PATH=models/
ML_TRAINING_DATA_PATH=data/training/

# ================================
# BACKUP & RECOVERY
# ================================
# Backup configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=backups/

# ================================
# DEVELOPMENT SETTINGS
# ================================
# Enable debug mode (development only)
DEBUG_MODE=false

# Enable API documentation
API_DOCS_ENABLED=true

# Mock external services in development
MOCK_EMAIL_SERVICE=true
MOCK_SMS_SERVICE=true

# ================================
# PRODUCTION SETTINGS
# ================================
# SSL/TLS configuration (production only)
SSL_CERT_PATH=/path/to/ssl/cert.pem
SSL_KEY_PATH=/path/to/ssl/private.key

# Cluster mode settings
CLUSTER_MODE=false
CLUSTER_WORKERS=4

# Health check configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30000

# ================================
# COMPLIANCE & AUDIT
# ================================
# Enable compliance features
COMPLIANCE_MODE=true
GDPR_ENABLED=true
HIPAA_ENABLED=false
SOX_ENABLED=false

# Data retention policies (days)
AUDIT_LOG_RETENTION=2555  # 7 years
USER_DATA_RETENTION=365   # 1 year after account deletion
SESSION_DATA_RETENTION=90 # 90 days

# ================================
# EXTERNAL INTEGRATIONS
# ================================
# Third-party security services
SECURITY_SCANNER_API_KEY=your-security-scanner-api-key
THREAT_INTELLIGENCE_API_KEY=your-threat-intel-api-key

# Notification services
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/your/webhook/url
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/your/webhook/url

# ================================
# FEATURE FLAGS
# ================================
# Enable/disable features
FEATURE_MFA_REQUIRED=true
FEATURE_DEVICE_TRACKING=true
FEATURE_ANOMALY_DETECTION=true
FEATURE_AUDIT_LOGGING=true
FEATURE_RBAC=true
FEATURE_PASSWORD_SHARING=false
FEATURE_BULK_OPERATIONS=false

# ================================
# PERFORMANCE TUNING
# ================================
# Database connection pool settings
DB_POOL_SIZE=10
DB_CONNECTION_TIMEOUT=5000

# Redis connection settings
REDIS_POOL_SIZE=10
REDIS_CONNECTION_TIMEOUT=5000

# Request timeout settings
REQUEST_TIMEOUT=30000
UPLOAD_TIMEOUT=60000

# ================================
# SECURITY HEADERS
# ================================
# Content Security Policy
CSP_DEFAULT_SRC='self'
CSP_SCRIPT_SRC='self'
CSP_STYLE_SRC='self' 'unsafe-inline'
CSP_IMG_SRC='self' data: https:

# HSTS settings
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=true
